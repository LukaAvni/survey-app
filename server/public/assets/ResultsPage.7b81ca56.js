import{m as A,p as O,n as V,q as B,j as x,k as z,l as G,Q as M}from"./QSelect.21bc3429.js";import{h as i,c as _,as as R,at as E,a as v,T as Y,g as Q,Q as H,i as L,e as h,b as J,l as K,d as U,au as $,r as D,w as y,o as W,f as X,av as Z,u as ee,v as w,x as te,y as c,H as f,z as u,N as ne,J as P,I as oe,G as N,ao as le,M as F}from"./index.ff82b4d1.js";import{_ as se}from"./plugin-vue_export-helper.cca98368.js";const ae=[i("g",{transform:"translate(-20,-20)"},[i("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[i("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),i("g",{transform:"translate(20,20) rotate(15 50 50)"},[i("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[i("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var re=_({name:"QSpinnerGears",props:R,setup(e){const{cSize:t,classes:n}=E(e);return()=>i("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},ae)}}),ie=_({name:"QInnerLoading",props:{...A,...O,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const n=Q(),o=V(e,n.proxy.$q),{transitionProps:l,transitionStyle:a}=B(e),r=v(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(o.value===!0?" q-inner-loading--dark":"")),s=v(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function d(){const g=[i(H,{size:e.size,color:e.color})];return e.label!==void 0&&g.push(i("div",{class:s.value,style:e.labelStyle},[e.label])),g}function p(){return e.showing===!0?i("div",{class:r.value,style:a.value},t.default!==void 0?t.default():d()):null}return()=>i(Y,l.value,p)}}),ce=_({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=Q(),o=L(K,h);if(o===h)return console.error("QPage needs to be a deep child of QLayout"),h;if(L(U,h)===h)return console.error("QPage needs to be child of QPageContainer"),h;const a=v(()=>{const s=(o.header.space===!0?o.header.size:0)+(o.footer.space===!0?o.footer.size:0);if(typeof e.styleFn=="function"){const d=o.isContainer.value===!0?o.containerHeight.value:n.screen.height;return e.styleFn(s,d)}return{minHeight:o.isContainer.value===!0?o.containerHeight.value-s+"px":n.screen.height===0?s!==0?`calc(100vh - ${s}px)`:"100vh":n.screen.height-s+"px"}}),r=v(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>i("main",{class:r.value,style:a.value},J(t.default))}});const I="https://www.gstatic.com/charts/loader.js";let C=null;const S=new Map;function ue(){return window.google!==void 0?Promise.resolve(window.google.charts):(C===null&&(C=new Promise(e=>{const t=document.querySelector('script[src="'.concat(I,'"]')),n=t||document.createElement("script");t||(n.src=I,n.type="text/javascript",document.head.append(n)),n.onload=()=>{window.google!==void 0&&e(window.google.charts)}})),C)}async function de(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current",{packages:t=["corechart","controls"],language:n="en",mapsApiKey:o}=arguments.length>1?arguments[1]:void 0;const l=await ue(),a="".concat(e,"_").concat(t.join("_"),"_").concat(n);if(S.has(a))return S.get(a);const r=new Promise(s=>{l.load(e,{packages:t,language:n,mapsApiKey:o}),l.setOnLoadCallback(()=>s(window.google))});return S.set(a,r),r}function he(e,t,n){return e!==null&&t instanceof e.visualization.DataTable||e!==null&&t instanceof e.visualization.DataView?t:e!==null&&Array.isArray(t)?e.visualization.arrayToDataTable(t,n):e!==null&&t!==null&&typeof t=="object"?new e.visualization.DataTable(t):null}function T(e,t,n,o,l,a){const r=(d,p,g)=>{if(g===void 0)throw new Error("please, provide chart type property");return new p.visualization[g](d)};if(e===null)throw new Error("please, provide charts lib property");if(n===null)throw new Error("please, provide chart element property");return t=(a||r)(n,e,o),fe(e,t,l),t}function fe(e,t,n){if(n!==null)for(const[o,l]of Object.entries(n))e!==null&&t!==null&&e.visualization.events.addListener(t,o,l)}function j(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,n;function o(){return t}return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];const d=this,p=function(){n=void 0,e.apply(d,r)};n!==void 0&&clearTimeout(n),n=setTimeout(p,o())}}let m=null;const k=$({name:"GChart",props:{type:{type:String,required:!0},data:{type:[Array,Object,null],default:()=>[]},isFirstRowLabels:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},version:{type:String,default:"current"},settings:{type:Object,default:()=>({packages:["corechart","table"]})},events:{type:Object,default:null},createChart:{type:Function,default:void 0},resizeDebounce:{type:Number,default:200}},setup(e,t){let{emit:n}=t;const o=D(null),l=D(null);function a(){if(m===null||o.value===null)return;const r=he(m,e.data,e.isFirstRowLabels);if(r!==null){var s;(s=o.value)===null||s===void 0||s.draw(r,e.options)}}return y(()=>e.data,()=>a(),{deep:!0}),y(()=>e.options,()=>a(),{deep:!0}),y(()=>e.type,()=>{o.value=T(m,o.value,l.value,e.type,e.events,e.createChart),a()}),W(()=>{de(e.version,e.settings).then(r=>{r!==void 0&&(m=r,o.value=T(m,o.value,l.value,e.type,e.events,e.createChart),n("ready",o.value,r),a())}),e.resizeDebounce>0&&window.addEventListener("resize",j(a,e.resizeDebounce))}),X(()=>{o.value!==null&&typeof o.value.clearChart=="function"&&o.value.clearChart(),e.resizeDebounce>0&&window.removeEventListener("resize",j(a,e.resizeDebounce))}),()=>i("div",{ref:l},[])}}),q=Z({});function pe(){q.component("GChart",k)}const ge={version:"1.1.0",install:pe};let b=null;typeof window!="undefined"&&(b=window.Vue);b!=null&&q.use(ge);const me={components:{GChart:k},data(){return{loading:!1,recordsFound:!0,selectedSchool:null,schoolList:[],displayList:[],chartOptions:{backgroundColor:"transparent",legend:{position:"none"},hAxis:{title:"Students",format:"0"},chartArea:{left:540,top:10,width:"100%"}},chartStyle:"height: calc(70vh)",chartData:[]}},watch:{selectedSchool(){this.loadPollResults()}},methods:{filterSchool(e,t){if(e===""){t(()=>{this.displayList=this.schoolList});return}t(()=>{const n=e.toLowerCase();this.displayList=this.schoolList.filter(o=>o.SchoolName.toLowerCase().indexOf(n)>-1)})},loadPollResults(){this.loading=!0;const e={SchoolID:this.selectedSchool===null?null:this.selectedSchool.SchoolID};fetch("http://localhost:3000/api/results",{method:"POST",headers:{Accept:"application.json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(t=>t.json()).then(t=>{this.loading=!1,this.recordsFound=t.length>0;let n=[];if(this.selectedSchool===null||this.selectedSchool.SchoolID===null){n.push(["School","Students",{role:"style"}]);for(const o of t)n.push([o.SchoolName,parseInt(o.studentCount),"#009900"]);this.chartData=n}else{n.push(["Job Title","Students",{role:"style"}]);for(const o of t)n.push([o.JobTitle,parseInt(o.studentCount),"#0000FF"]);this.chartData=n}})}},mounted(){fetch("http://localhost:3000/api/school-list").then(e=>e.json()).then(e=>{this.schoolList=[{SchoolID:null,SchoolName:"all NYC schools"}].concat(e),this.displayList=this.schoolList,this.selectedSchool={SchoolID:null,SchoolName:"all NYC schools"}})}},ve={class:"row justify-center"},ye={class:"col-10"},we=f("h4",{class:"text-center q-my-md"},"Poll Results",-1),Ce=f("p",null,'Select a school to show what jobs students are interested in. Select "all NYC schools" to see how many students/schools have participated.',-1),Se={key:0},be=f("h6",{class:"q-ma-none q-mt-md"},"loading data...",-1),_e={key:1,style:{width:"100%",height:"300px"},class:"relative-position"},xe=f("p",{class:"absolute-center text-blue"},"no records found!",-1),ze=[xe];function Le(e,t,n,o,l,a){const r=ee("GChart");return w(),te(ce,null,{default:c(()=>[f("div",ve,[f("div",ye,[we,Ce,u(M,{outlined:"",modelValue:l.selectedSchool,"onUpdate:modelValue":t[0]||(t[0]=s=>l.selectedSchool=s),options:l.displayList,label:"select a NYC high school","option-value":"SchoolID","option-label":"SchoolName","use-input":"","input-debounce":"0",onFilter:a.filterSchool,clearable:"",class:"q-mb-md"},{option:c(s=>[u(x,ne(s.itemProps,{style:{background:"white"}}),{default:c(()=>[u(z,null,{default:c(()=>[u(G,{lines:"1"},{default:c(()=>[P(oe(s.opt.SchoolName),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),"no-option":c(()=>[u(x,null,{default:c(()=>[u(z,{class:"text-grey"},{default:c(()=>[P(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","onFilter"]),l.recordsFound?(w(),N("div",Se,[u(r,{type:"BarChart",data:l.chartData,options:l.chartOptions,style:le(l.chartStyle)},null,8,["data","options","style"]),u(ie,{showing:l.loading},{default:c(()=>[u(re,{size:"50px",color:"primary"}),be]),_:1},8,["showing"])])):F("",!0),l.recordsFound?F("",!0):(w(),N("div",_e,ze))])])]),_:1})}var Fe=se(me,[["render",Le]]);export{Fe as default};
